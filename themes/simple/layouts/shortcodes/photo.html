{{ $original := $.Page.Resources.GetMatch (.Get "src") }}
{{ if $original }}
  {{ $mini := $original.Resize "40x Box" }}
  <figure>
    <picture class="block shadow-lg {{ if .Parent }}{{ else }}my-6 {{ if eq (.Get "class") "vertical" }}mx-auto w-2/3{{ else }}md:-mx-10{{ end }}{{ end }}" alt="{{ with .Get "alt" }}{{ . }}{{ else }}{{.Get "src" }}{{ end }}">
      <source class="lazyload"
              srcset="{{ $mini.RelPermalink }}"
              type="image/jpg"
              data-srcset="{{ $original.RelPermalink }}" >
      <img data-action="zoom"
          width="{{ $original.Width }}"
          height="{{ $original.Height }}"
          src="{{ $mini.RelPermalink }}"
          data-zoom-src="{{ $original.RelPermalink}}"
          data-src="{{ $original.RelPermalink }}"
          alt="{{ with .Get "alt" }}{{ . }}{{ else }}{{.Get "src" }}{{ end }}"
          class="w-full lazyload">
    </picture>
    {{ with .Get "caption" }}
      <figcaption class="text-xs dark:text-gray-300 text-gray-500 text-center">
        {{ . }}
      </figcaption>
    {{ end }}
  </figure>
{{ end }}
