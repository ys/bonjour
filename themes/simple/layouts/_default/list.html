{{ define "main" }}
<div class="z-20 dark:prose-invert prose prose-sm mb-16 with-links relative">
  {{ .Content }}
</div>
<div>
    {{ $paginator := (.Paginate (where .RegularPages ".Params.archived" "!=" true)  2500) }}
    {{ range $paginator.Pages.GroupByDate "2006" }}
      <header class="flex gap-2 my-4 text-xl items-center">
        <span>{{ partial "moon" .}} </span>
        <h2 class=" font-bold">{{ .Key }}</h2>
      </header>
    {{ range .Pages }}
      {{ $color := "yellow" }}
      {{range first 1 (shuffle $.Site.Params.themeColors) }}
        {{ $color = . }}
      {{ end }}
      {{ with .Params.color }}
        {{ $color = . }}
      {{ end }}
      <article class="group  hover:bg-{{$color}} !bg-opacity-70 rounded-sm">
        <a href="{{ .RelPermalink }}"
              class="text-crust dark:text-gray-100 hover:bg-{{$color}} bg-opacity-70 ">
        <header class="text-sm bottom-4  flex flex-row justify-between gap-2 items-center p-2">
          <h2 class="ellipsis break-all max-w-[60%] line-clamp-1 text-gray-800 text-sm dark:text-gray-100  no-underline ">{{ .Title }}</h2>
          <div class=" flex-grow "><div class="mt-3 border-t border-dotted border-gray-800 dark:border-gray-100" ></div></div>
          <h3 class="max-w-[30%] ellipsis break-all line-clamp-1 font-sans no-underline font-normal text-xs ">
             <span class="group-hover:hidden">
              {{ with .Params.pricetag }}
                {{ . | markdownify }}
              {{ else }}
                {{ .Date.Day }} {{ index .Site.Data.mois (printf "%d" .Date.Month) }}
              {{ end }}
             </span>
             <span class="hidden group-hover:block">
               {{ .Params.emoji }}
             </span>
          </h3>
        </header>
        </a>
      </article>
  {{ end }}
  {{ end }}
  <div class="">
    {{ partial "pagination.html" . }}
  </div>
</div>
{{ end }}
