{{ define "main" }}

<header class="relative">
  <h1 class="text-3xl font-ffserif text-darker dark:text-gray-100 {{ with .Params.Color }}hover:text-{{ . }}-600 {{ else }}hover:text-accent-600{{ end }} transition ease-in-out duration-200"><a href="{{ "/" | relLangURL }}">{{.Title}}</a></h1>
</header>
<div class="post with-links">
  {{ .Content }}
</div>

{{ if eq .Section "posts" }}
  {{ with ($.Site.GetPage (printf "/categories")) }}
    <div class="md:-mx-32 my-6 flex flex-row justify-between ">
      {{ range $cat :=  sort (where .Pages ".Params.favorite" true) "Title" }}
      <div class="flex flex-col  items-start p-8 relative">
        {{ with $cat.Resources.GetMatch "back.svg" }}
          <div class="z-0 fill {{with $cat.Params.color}} text-{{.}}-200 dark:text-{{.}}-800{{ else}} dark:text-accent-800 text-accent-200{{end}} absolute top-4 left-2 w-2/3 h-2/3">
            {{.Content |safeHTML}}
          </div>
        {{ end}}
        <span class="z-10 hidden">{{ $cat.Params.emoji }}</span>
        <a class="z-10 m-4 font-semibold underline {{with $cat.Params.color }} td-{{.}} {{else}}td-accent {{end}} whitespace-nowrap" href="{{ $cat.RelPermalink }}">{{ $cat.Title}}</a>
      </div>
      {{ end }}
    </div>
  {{ end }}
{{ end }}

{{ $paginator := (.Paginate .RegularPages 250) }}
<div class="mb-10 {{ with .Params.grid }}md:-mx-32 grid gap-8 md:grid-cols-3 sm:grid-cols-1{{end}}">
  {{ range $paginator.Pages }}
    {{ if $.Params.grid }}
      {{ partial "cover_title" . }}
    {{ else if $.Params.inline }}
      {{ partial "inline" . }}
    {{ else  }}
      {{ partial "title" . }}
    {{ end }}
  {{ end }}
  <div class="">
    {{ partial "pagination.html" . }}
  </div>
</div>
{{ end }}
