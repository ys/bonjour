{{ $.Scratch.Set "color" "yellow" }}
{{ with .Params.color }}
  {{ $.Scratch.Set "color" . }}
{{ else }}
  {{range first 1 (shuffle $.Site.Params.themeColors) }}
    {{ $.Scratch.Set "color" . }}
  {{ end }}
{{ end }}
<!DOCTYPE html>
<html lang="{{ .Lang }}">
    <head>
        {{ with .OutputFormats.Get "rss" }}
          <link rel="{{ .Rel }}"
                type="{{ .MediaType.Type }}"
                href="{{ .RelPermalink | safeURL }}"
                title="{{ $.Site.Title }}" />
        {{ end -}}
        {{ with .OutputFormats.Get "jsonfeed" }}
          <link rel="{{ .Rel }}"
                type="{{ .MediaType.Type }}"
                href="{{ .RelPermalink | safeURL }}"
                title="{{ $.Site.Title }}" />
        {{ end -}}
        {{ partial "opengraph.html" . }}
        {{ partial "twitter.html" . }}
        {{ partial "seo" . }}
        {{ partialCached "shared_head.html" . }}
    </head>
    <body class="{{ .Site.Params.themePalette}} content-{{$.Scratch.Get "color" }} font-serif  antialiased  dark:bg-crust dark:text-white text-crust {{if or .Params.backgroundColor $.Site.Params.backgroundColor }}{{with .Params.background}}bg-{{.}} {{end}} bg-{{$.Scratch.Get "color" }} bg-opacity-10 selection:bg-opacity-20 selection:bg-{{$.Scratch.Get "color"}}{{else}}selection:bg-{{$.Scratch.Get "color"}} selection:bg-opacity-20{{end}}">
      <span class="md:fixed mt-6 ml-6 md:mt-0 md:ml-0 top-6 left-6 block logo hover:animate-spin text-center text-6xl w-10 text-{{$.Scratch.Get "color"}}  ">
        {{ if .Parent }}
          <a href="{{ .Parent.RelPermalink }}"
             arial-label="{{.Parent.Title}}"
             alt="{{ .Parent.Title}}">
        {{ else }}
          <a href="{{ "/" | relLangURL }}" alt="Get me back to the home" aria-label="Get me back to the home">
        {{end}}
        {{ if fileExists "/static/logo.svg" }}
          {{ readFile "/static/logo.svg" | safeHTML}}
          <span class="hidden">Get me back to the home</span>
        {{ else }}
          {{.Params.emoji | default .Site.Params.emoji}}
        {{ end }}
        </a>
    </span>
    <header class="relative py-8 md:max-w-xl md:mx-auto md:pt-36  mx-6 md:container flex flex-col md:flex-row  gap-2 ">
      <div class="group flex flex-col h-full tracking-tighter ">
        <h1 class="text-2xl  font-black italic transition ease-in-out text-{{$.Scratch.Get "color"}}">
          {{ if .Parent }}<a href="{{ .Parent.RelPermalink }}" alt="{{ .Parent.Title}}"> {{ else }}<a href="{{ "/" | relLangURL }}" alt="home">{{end}}
          {{ .Title | default .Site.Title }}</a>
        </h1>
        {{ with .Params.subtitle }}
          <span class="tracking-normal text-sm font-sans">{{.}}</span>
        {{ else }}
          {{ $current := . }}
          <nav class="main_menu font-sans text-sm">
            <ul class="inline leading-relaxed">
                {{ $menu := .Site.Menus.main}}
                  {{ range  $menu }}
                    {{ $active := or ($current.IsMenuCurrent "nav" .) ($current.HasMenuCurrent "nav" .) }}
                    {{ $active = or $active (eq .Page $current) }}
                    {{ $active = or $active (eq .Page.Section $current.Type) }}
                    <li class="inline  relative ">
                      <a class="lowercase {{ .Params.class }} whitespace-nowrap {{if $active}}   {{end}} {{ with .Page.Params.color }}hover:text-{{ . }} hover:border-{{ . }} {{ if $active }}underline decoration-dotted  decoration-{{ . }} {{ end }}{{ else }}hover:text-{{$.Scratch.Get "color"}} {{ if $active }}underline decoration-solid decoration-{{$.Scratch.Get "color"}} {{ end }}{{ end }} transition ease-in-out duration-200 "
                         href="{{ .URL }}"
                         title="{{ .Title }}">
                        {{ if .Params.useEmoji }}
                          {{ $current.Params.emoji | default $current.Site.Params.emoji}}
                        {{ else }}
                          {{ .Name }}
                        {{ end }}
                      </a>
                    </li>
                  {{ end }}
              </ul>
            </nav>
  {{end}}
</div>
</header>
<main class="md:container mx-auto  md:max-w-xl w-full  grid grid-cols-1 gap-16 min-h-1/2">
    <div class="mx-6 md:mx-0 relative">
        {{ block "main" . }}
        {{ end }}
    </div>
</main>
{{ block "full" . }}
{{ end }}
<div class="font-sans lg:mt-16 container lg:mx-auto lg:max-w-xl">
    <footer class="relative lg:mx-0 mx-6 py-10 dark:text-gray-100 text-gray-600  flex md:flex-row flex-col  justify-items-left justify-between items-left gap-2 text-sm">
        <div>
            <div class="flex font-bold">{{ .Site.Params.footer }} - {{ now.Year }}</div>
            <div class="py-2">
                <ul class="flex flex-wrap flex-row text-right  ">
                    {{ $current := . }}
                    {{ range .Site.Menus.footer }}
                    {{ $active := or ($current.IsMenuCurrent .Menu .) ($current.HasMenuCurrent .Menu .) }}
                    {{ $active = or $active (eq .Page $current) }}
                    {{ $active = or $active (eq .Page.Section $current.Type) }}
                    <li class=" pl-1">
                        <a class="{{ if $active }}underline decoration-dotted  decoration-{{$.Scratch.Get "color"}} {{ end }} hover:text-{{$.Scratch.Get "color"}} transition ease-in-out duration-200 "
                           href="{{ .URL }}"
                           title="{{ .Title }}">{{ .Name }}</a>
                    </li>
                    {{ end }}
                </ul>
            </div>
            <div class="">
                <ul class="flex flex-row text-right  flex-wrap">
                    <li>{{ partial "emoji" . }}</li>
                    {{ with .Site.Params.social.instagram }}
                    <li class="pl-1   ">
                        <a class="hover:text-{{$.Scratch.Get "color"}} transition ease-in-out duration-200"
                           href="https://instagram.com/{{ . }}">Instagram</a>
                    </li>
                    {{ end }}
                    {{ with .Site.Params.social.twitter }}
                    <li class=" pl-1  ">
                        <a class="hover:text-{{$.Scratch.Get "color"}} transition ease-in-out duration-200"
                           href="https://twitter.com/{{ . }}">Twitter</a>
                    </li>
                    {{ end }}
                    {{ with .Site.Params.social.github }}
                    <li class="pl-1  ">
                        <a class="hover:text-{{$.Scratch.Get "color"}} transition ease-in-out duration-200"
                           href="https://github.com/{{ . }}">GitHub</a>
                    </li>
                    {{ end }}
                    {{ with .Site.Params.social.mastodon }}
                    <li class="pl-1  ">
                        <a class="hover:text-{{$.Scratch.Get "color"}} transition ease-in-out duration-200"
                           href="https://{{.domain}}/{{ .username }}">Mastodon</a>
                    </li>
                    {{ end }}
                    <li class="pl-1  ">
                        <a class="hover:text-{{$.Scratch.Get "color"}} transition ease-in-out duration-200"
                           href="mailto:{{ $.Site.Params.social.email }}">{{$.Site.Params.social.email}}</a>
                    </li>
                </ul>
            </div>
        </div>
        <a href="#"
           alt="Get me back to the top"
           aria-label="Get me back to the top"
           class=" w-8 text-{{ $.Scratch.Get "color" }} ">
            {{ if fileExists "/static/logo.svg" }}
            {{ readFile "/static/logo.svg" | safeHTML}}
            <span class="hidden">Get me back to the top</span>
        {{ else }}
            {{.Params.emoji | default .Site.Params.emoji}}
            {{ end }}
        </a>
    </footer>
</div>
{{ if eq .Type "shop" }}
<script src="https://js.stripe.com/v3"></script>
{{ end }}
{{ $.Scratch.Set "jslibs" slice }}
{{ $libs := slice "js/lunr.min.js" "js/photoswipe.js" "js/photoswipe-ui-default.js" "js/photoswipe-simplify.js" "js/lazyload.min.js" "js/main.js" }}
{{ range $libs }} {{ $.Scratch.Add "jslibs" (resources.Get . ) }} {{ end }} {{ $js := .Scratch.Get "jslibs" | resources.Concat "js/main.js" }} {{ if .Site.IsServer }}
<script src="{{ $js.RelPermalink }}"></script>
{{ else }} {{ $js := $js | minify | fingerprint "sha512"}}
<script src="{{ $js.RelPermalink }}"></script>
{{ end }}
<script defer src="/_vercel/insights/script.js"></script>
{{- $hearts := resources.Get "js/hearts.js" -}}
<script defer src="{{$hearts.RelPermalink}}" type="module"></script>
</body>
</html>
