<!DOCTYPE html>
<html lang="{{ .Lang }}">

<head>
  {{ with .OutputFormats.Get "rss" }}
    <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .RelPermalink | safeURL }}" title="{{ $.Site.Title }}" />
  {{ end -}}
  {{ with .OutputFormats.Get "jsonfeed" }}
    <link rel="{{ .Rel }}" type="{{ .MediaType.Type }}" href="{{ .RelPermalink | safeURL }}" title="{{ $.Site.Title }}" />
  {{ end -}}
  {{ partial "opengraph.html" . }}
  {{ template "_internal/twitter_cards.html" . }}
  {{ partial "seo" . }}
  {{ partialCached "shared_head.html" . }}
</head>

{{ $.Scratch.Set "color" "accent" }}
{{ with .Params.color }}
{{ $.Scratch.Set "color" . }}
{{ else }}
{{range first 1 (shuffle (slice "accent" "sunray" "purpleheart" "forest" "jazzberry" "rose" "teal" "tuscan")) }}
{{ $.Scratch.Set "color" . }}
{{ end }}
{{ end }}
{{- $images := $.Resources.ByType "image" -}}
{{- $featured := $images.GetMatch "*feature*" -}}
{{- $featured := cond (ne $featured nil) $featured ($images.GetMatch "{*cover*,*thumbnail*}") -}}
{{- with $featured -}}
{{range first 1 (.Colors) }}
{{ $.Scratch.Set "color" (printf "[%s]" .) }}
{{ end }}
{{ end }}

<body
    class=" font-sans text-base leading-relaxed antialiased  text-darker   {{with .Params.background}}bg-{{.}} {{end}} selection:bg-{{$.Scratch.Get "color"}} selection:text-{{$.Scratch.Get "color"}}">

  {{ partial "header" . }}
  <div class="md:container md:ml-24 md:max-w-lg w-full  grid grid-cols-1 gap-16 min-h-1/2">
    <div class="mx-4 md:mx-0 relative">
      {{ block "main" . }}
      {{ end }}
    </div>
  </div>
  {{ block "full" . }}
  {{ end }}

  {{ partial "footer" . }}
  {{ partial "js" . }}
</body>

</html>
