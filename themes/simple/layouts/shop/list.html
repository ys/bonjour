{{ define "main" }}

<div class="z-20 dark:prose-invert prose mb-16 with-links relative">
  {{ .Content }}
</div>
{{ end }}
{{ define "full" }}
{{ $paginator := (.Paginate (where .RegularPages ".Params.archived" "!=" true) 250) }}
<div class="max-w-6xl h-feed md:grid md:grid-cols-3 md:gap-8 md:gap-y-32 mb-10 ">
  {{ range  $paginator.Pages }}
    <article class=" group mb-8 md:mb-0">
  {{ $images := .Resources.ByType "image" }}
  {{ $src := $images.GetMatch "cover" }}
  {{ $src := $images.GetMatch "*feature*" }}
  {{ $src := cond (ne $src nil) $src ($images.GetMatch "{*cover*,*thumbnail*}") }}
  {{ $src := cond (ne $src nil) $src (index $images 0) }}

  {{ if $src }}
    {{ $xs := "15x10" }}
    {{ $md := "900x600" }}
    {{ $lqip := $src.Resize (printf "%s webp" $xs) }}
    {{ $small := $src.Resize (printf "%s webp" $md) }}
    {{ if eq $src.MediaType.SubType "gif" }}
       {{ $lqip = $src.Resize (printf "%s" $xs) }}
       {{ $small = $src }}
     {{ end }}
     <a href="{{.RelPermalink}}" class=" mb-4  block">
       <picture class=" box-border block w-full">
        <img
          loading="lazy"
          style="background: url(data:image/webp;base64,{{ $lqip.Content | base64Encode  }}); background-size: cover"
          alt=""
          class="aspect-[{{$small.Width}}/{{$small.Height}}]  hover:shadow-{{ $.Scratch.Get "color" }}/20 shadow-md hover:shadow-xl cursor-pointer lazy "
          src="{{ $small.RelPermalink }}"
          data-src="{{ $small.RelPermalink }}"
          width="{{ $small.Width }}" height="{{ $small.Height }}"/>
        </picture>
     </a>

  {{ end }}
      <header class=" flex flex-col justify-end">
          <div class="font-sans tracking-tight text-xs {{ with .Params.Color }}text-{{ . }} {{ else }}dark:text-white text-darker{{end}} {{ with .Params.Color }}group-hover:text-{{ . }} {{ else }}group-hover:text-accent{{ end }} transition ease-in-out duration-200 ">
            {{ with .Params.emoji }}
              {{ . }}
            {{ else }}
              {{ partial "emoji" . }}
            {{ end }}
            {{ with .Params.pricetag }}
              {{ . | markdownify }}
            {{ else }}
                {{ partial "category-link" . }}
                {{ .Site.Params.arrow }}
                {{ .Date.Day }} {{ index .Site.Data.mois (printf "%d" .Date.Month) }} {{ .Date.Year }}
            {{ end }}
          </div>
            <h2 class="text-xl  dark:text-white text-darker {{ with .Params.Color }}group-hover:text-{{ . }} {{ else }}group-hover:text-accent{{ end }} transition ease-in-out duration-200">
        <a href="{{ with .Params.bookmarkOf }}{{ . }}{{ else }}{{ .RelPermalink }}{{end}}">
                {{ .Title  |markdownify}}
        </a>
            </h2>
            <h3 class="line-clamp-2 text-sm dark:text-white text-darker italic transition ease-in-out duration-400 ">
              {{ with .Params.subtitle }}
              {{ . }}
              {{ else }}
                {{ with .Params.description }}
                  {{ .  }}
                {{ else}}
                  {{ .Summary |markdownify }}
                {{ end }}
              {{ end }}
            </h3>
          </header>
      </article>
  {{ end }}
  <div class="">
    {{ partial "pagination.html" . }}
  </div>
</div>
{{ end }}
